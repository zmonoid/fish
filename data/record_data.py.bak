import cv2

def record_data(cap, name):
    fourcc = cv2.VideoWriter_fourcc(*'XVID')
    out = cv2.VideoWriter('%s.avi' % name, fourcc, 5.0, (640,480))
    record = False
    while cap.isOpened():
        ret, frame = cap.read()
        if ret == True:
            #frame = cv2.flip(frame, 0)
            #frame = cv2.flip(frame, 1)
            cv2.imshow('frame', frame)
            if record:
                out.write(frame)
            if cv2.waitKey(1) & 0xFF == ord('s'):
                record = not record
                if record:
                    print "Record started, press s to stop"
                else:
                    print "Record ended..."
                    return
            if cv2.waitKey(1) & 0xFF == ord('q'):
                break
        else:
             break


    cap.release()
    out.release()
    cv2.destroyAllWindows()


def main():
    cap = cv2.VideoCapture(0)
    names = raw_input("Type the sequence of the object name seperated by comma, e.g: battery, card, tissue, tea, space\n")
    names = names.split(',')
    for name in names:
        name = name.strip()
        print "Taking video of object %s" % name
        print "Switch to video window and press s to start..."
        record_data(cap, name)

if __name__ == '__main__':
    main()
